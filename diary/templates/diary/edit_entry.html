{% extends 'diary/base.html' %}
{% load widget_tweaks %}

{% block title %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å: {{ entry.title }}{% endblock %}

{% block content %}
<h1 class="mb-6 text-3xl font-semibold text-red-600">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å—å</h1>

<form method="post" enctype="multipart/form-data" class="bg-white p-8 rounded-lg shadow-md max-w-3xl mx-auto space-y-6">
    {% csrf_token %}

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div>
        <label for="{{ form.title.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
        {{ form.title|add_class:"block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400 focus:border-red-500 focus:ring-1 focus:ring-red-500" }}
        {% if form.title.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.title.errors.0 }}</p>
        {% endif %}
    </div>

    <!-- –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ -->
    <div>
        <label for="{{ form.content.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</label>
        {{ form.content|add_class:"block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400 focus:border-red-500 focus:ring-1 focus:ring-red-500" }}
        {% if form.content.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.content.errors.0 }}</p>
        {% endif %}
    </div>

    <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
    <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</label>
        <div class="flex flex-wrap gap-4">
            {% for checkbox in form.categories %}
                <label class="inline-flex items-center space-x-2 cursor-pointer rounded-md border border-gray-300 px-3 py-2 hover:bg-red-50">
                    {{ checkbox.tag }}
                    <span class="text-gray-700">{{ checkbox.choice_label }}</span>
                </label>
            {% endfor %}
        </div>
        {% if form.categories.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.categories.errors.0 }}</p>
        {% endif %}
    </div>

    <!-- –ó–∞–∫—Ä–µ–ø–∏—Ç—å –∑–∞–ø–∏—Å—å -->
    <div class="flex items-center space-x-2">
        {{ form.is_pinned|add_class:"h-4 w-4 text-red-600 border-gray-300 rounded" }}
        <label for="{{ form.is_pinned.id_for_label }}" class="text-sm text-gray-700 cursor-pointer">üìå –ó–∞–∫—Ä–µ–ø–∏—Ç—å –∑–∞–ø–∏—Å—å</label>
    </div>

    <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
    <div>
        <label for="{{ form.image.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
        {{ form.image|add_class:"block w-full text-gray-700" }}
        {% if entry.image %}
            <div class="mt-3">
                <img src="{{ entry.image.url }}" alt="–¢–µ–∫—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" class="rounded shadow-sm max-h-64 object-contain" />
            </div>
        {% endif %}
        {% if form.image.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.image.errors.0 }}</p>
        {% endif %}
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ -->
    <div class="flex space-x-4">
        <button type="submit" class="flex-grow bg-red-600 hover:bg-red-700 text-white font-semibold py-2 rounded-md shadow-sm transition">
            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
        </button>
        <a href="{% url 'view_entry' entry.id %}" class="flex-grow bg-gray-300 hover:bg-gray-400 text-gray-900 font-semibold py-2 rounded-md text-center shadow-sm transition">
            –ù–∞–∑–∞–¥
        </a>
    </div>
</form>
{% endblock %}
